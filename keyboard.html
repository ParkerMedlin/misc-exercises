<!DOCTYPE html>
<head>
  <style>
    .key { position: absolute; font-family: Helvetica; font-weight: 100; font-size: 12px;
      border: 1px solid rgba(32,32,32,0.2);
      border-radius: 0px 0px 5px 5px;
      cursor:pointer;
      box-shadow: 0px 5px 1px rgba(32,32,32,0.2);
      -webkit-transition: margin 0.05s ease, background-color 0.05s ease, box-shadow 0.05s ease; }
    .key:hover { background-color: rgb(188, 188, 192); }

    .key .label { position: absolute; bottom: 5px; text-align: center; left: 0px; right: 0px; }

    .black { background-color: rgb(32,32,32); color: #ffffff; z-index: 1; text-shadow: 0px -1px 1px rgba(255,255,255,0.5); }

    .white { background-color: #ffffff; color: rgb(32,32,32); z-index: 0; text-shadow: 0px 1px 1px rgba(32,32,32,0.5); }

    .keyboard-holder { margin: 30px auto; height: 200px; position:relative; user-select:none; -webkit-user-select:none;-moz-user-select:none;-o-user-select:none; }

    .code { border: 1px solid rgba(32,32,32,0.2); color: rgb(32,32,32); font-family: Courier New, Courier, monospace; font-size: 12px; white-space:pre; padding: 10px; margin: 10px; }

    #noteValueContainer { display: flex; justify-content: center; align-items: center;}

    #noteValueDisplay { padding: 12px; font-family: Helvetica; font-size: 72px;}

    #noteLabel { font-size: 24px; font-family: Helvetica; }

    #octaveValueDisplay { font-size: 18px; font-family: Helvetica; margin-top: 24px;}

    #staffs { display: flex; justify-content: center; align-items: center; }
  </style>
</head>

<body>
  <div id="staffs">
    <div id="output"></div>
  </div>
  <div id="keyboard" class="keyboard-holder" style="width: 1080px">
    <div class="white key" id="KEY_C,-1" style="width: 40px; height: 200px; left: 0px"></div>
    <div class="black key" id="KEY_C#,-1" style="width: 30px; height: 120px; left: 25px"></div>
    <div class="white key" id="KEY_D,-1" style="width: 40px; height: 200px; left: 40px"></div>
    <div class="black key" id="KEY_D#,-1" style="width: 30px; height: 120px; left: 65px"></div>
    <div class="white key" id="KEY_E,-1" style="width: 40px; height: 200px; left: 80px"></div>
    <div class="white key" id="KEY_F,-1" style="width: 40px; height: 200px; left: 120px"></div>
    <div class="black key" id="KEY_F#,-1" style="width: 30px; height: 120px; left: 145px"></div>
    <div class="white key" id="KEY_G,-1" style="width: 40px; height: 200px; left: 160px"></div>
    <div class="black key" id="KEY_G#,-1" style="width: 30px; height: 120px; left: 185px"></div>
    <div class="white key" id="KEY_A,-1" style="width: 40px; height: 200px; left: 200px"></div>
    <div class="black key" id="KEY_A#,-1" style="width: 30px; height: 120px; left: 225px"></div>
    <div class="white key" id="KEY_B,-1" style="width: 40px; height: 200px; left: 240px"></div>
    <div class="white key" id="KEY_C,0" style="width: 40px; height: 200px; left: 280px"></div>
    <div class="black key" id="KEY_C#,0" style="width: 30px; height: 120px; left: 305px"></div>
    <div class="white key" id="KEY_D,0" style="width: 40px; height: 200px; left: 320px"></div>
    <div class="black key" id="KEY_D#,0" style="width: 30px; height: 120px; left: 345px"></div>
    <div class="white key" id="KEY_E,0" style="width: 40px; height: 200px; left: 360px"></div>
    <div class="white key" id="KEY_F,0" style="width: 40px; height: 200px; left: 400px"></div>
    <div class="black key" id="KEY_F#,0" style="width: 30px; height: 120px; left: 425px"></div>
    <div class="white key" id="KEY_G,0" style="width: 40px; height: 200px; left: 440px"></div>
    <div class="black key" id="KEY_G#,0" style="width: 30px; height: 120px; left: 465px"></div>
    <div class="white key" id="KEY_A,0" style="width: 40px; height: 200px; left: 480px"></div>
    <div class="black key" id="KEY_A#,0" style="width: 30px; height: 120px; left: 505px"></div>
    <div class="white key" id="KEY_B,0" style="width: 40px; height: 200px; left: 520px"></div>
    <div class="white key" id="KEY_C,1" style="width: 40px; height: 200px; left: 560px"></div>
    <div class="black key" id="KEY_C#,1" style="width: 30px; height: 120px; left: 585px"></div>
    <div class="white key" id="KEY_D,1" style="width: 40px; height: 200px; left: 600px"></div>
    <div class="black key" id="KEY_D#,1" style="width: 30px; height: 120px; left: 625px"></div>
    <div class="white key" id="KEY_E,1" style="width: 40px; height: 200px; left: 640px"></div>
    <div class="white key" id="KEY_F,1" style="width: 40px; height: 200px; left: 680px"></div>
    <div class="black key" id="KEY_F#,1" style="width: 30px; height: 120px; left: 705px"></div>
    <div class="white key" id="KEY_G,1" style="width: 40px; height: 200px; left: 720px"></div>
    <div class="black key" id="KEY_G#,1" style="width: 30px; height: 120px; left: 745px"></div>
    <div class="white key" id="KEY_A,1" style="width: 40px; height: 200px; left: 760px"></div>
    <div class="black key" id="KEY_A#,1" style="width: 30px; height: 120px; left: 785px"></div>
    <div class="white key" id="KEY_B,1" style="width: 40px; height: 200px; left: 800px"></div>
    <div class="white key" id="KEY_C,2" style="width: 40px; height: 200px; left: 840px"></div>
    <div class="black key" id="KEY_C#,2" style="width: 30px; height: 120px; left: 865px"></div>
    <div class="white key" id="KEY_D,2" style="width: 40px; height: 200px; left: 880px"></div>
    <div class="black key" id="KEY_D#,2" style="width: 30px; height: 120px; left: 905px"></div>
    <div class="white key" id="KEY_E,2" style="width: 40px; height: 200px; left: 920px"></div>
    <div class="white key" id="KEY_F,2" style="width: 40px; height: 200px; left: 960px"></div>
    <div class="black key" id="KEY_F#,2" style="width: 30px; height: 120px; left: 985px"></div>
    <div class="white key" id="KEY_G,2" style="width: 40px; height: 200px; left: 1000px"></div>
    <div class="black key" id="KEY_G#,2" style="width: 30px; height: 120px; left: 1025px"></div>
    <div class="white key" id="KEY_A,2" style="width: 40px; height: 200px; left: 1040px"></div>
    <div class="black key" id="KEY_A#,2" style="width: 30px; height: 120px; left: 1065px"></div>
    <div class="white key" id="KEY_B,2" style="width: 40px; height: 200px; left: 1080px"></div>
    <div class="white key" id="KEY_C,3" style="width: 40px; height: 200px; left: 1120px"></div>
  </div>
  <div id="noteValueContainer">
    <p id="noteLabel">Note:</p>
    <h1 id="noteValueDisplay"></h1>
    <p id="octaveValueDisplay"></p>
  </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/vexflow/build/cjs/vexflow.js"></script>
<script src="audiosynth.js"></script>
<script>
  keyboardKeys = document.querySelectorAll('div[class*="key"')
  for (key of keyboardKeys) {
    key.addEventListener("mousedown", (e) => {
      const noteValue = e.target.getAttribute("id").slice(0,-2).substring(4).replace(",","");
      const octaveValue = e.target.getAttribute("id").substring(5).replace(",","").replace("#","");
      document.getElementById("noteValueDisplay").textContent = noteValue;
      document.getElementById("octaveValueDisplay").textContent = octaveValue;
      e.target.style.backgroundColor = "blue";
    });
    key.addEventListener("mouseup", (e) => {
      e.target.style.backgroundColor="";
    });
  };
</script>

<script>
  const { Renderer, Stave, StaveNote, Voice, Formatter } = Vex.Flow;

  Vex.Flow.setMusicFont('Bravura');

  // Create an SVG renderer and attach it to the DIV element with id="output".
  const div = document.getElementById('output');
  const renderer = new Renderer(div, Renderer.Backends.SVG);

  // Configure the rendering context.
  renderer.resize(300, 200);
  const context = renderer.getContext();

  // Create a stave of width 200 at position 60, 40 on the canvas.
  const stave = new Stave(60, 40, 200);

  // Add a clef and time signature.
  stave.addClef('treble')

  const notes = [
    // A quarter-note C.
    new StaveNote({ keys: ["c/4"], duration: "q" }),

    // A quarter-note D.
    new StaveNote({ keys: ["d/4"], duration: "q" }),

    // A quarter-note rest. Note that the key (b/4) specifies the vertical
    // position of the rest.
    new StaveNote({ keys: ["b/4"], duration: "qr" }),

    // A C-Major chord.
    new StaveNote({ keys: ["c/4", "e/4", "g/4"], duration: "q" }),
    ];

  // Create a voice in 4/4 and add above notes
  const voice = new Voice({ num_beats: 4, beat_value: 4 });
  voice.addTickables(notes);

  // Format and justify the notes to 400 pixels.
  new Formatter().joinVoices([voice]).format([voice], 200);

  // Render voice
  stave.setContext(context).draw();
  voice.draw(context, stave);
</script>

